# Exercise 6 RAG Chatbot - Environment Variables Template
# =======================================================
# Copy this file to .env and fill in your actual values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Database connection URL with credentials
DATABASE_URL=postgresql+asyncpg://username:password@localhost:5433/database_name
# Alternative database configuration variables (if used instead of DATABASE_URL)
#POSTGRES_DB=database_name
#POSTGRES_USER=username
#POSTGRES_PASSWORD=password

# =============================================================================
# VECTOR DATABASE CONFIGURATION
# =============================================================================
CHROMADB_HOST=localhost
CHROMADB_PORT=8000
CHROMADB_COLLECTION_NAME=rag_documents

# =============================================================================
# REDIS CONFIGURATION (Optional - for caching)
# =============================================================================
# Redis connection URL with credentials
REDIS_URL=redis://username:password@localhost:6380/0
# Alternative Redis password (if used instead of REDIS_URL)
#REDIS_PASSWORD=password

# =============================================================================
# LLM API KEYS (Choose one or both)
# =============================================================================
# OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Anthropic Configuration
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
# Environment
ENVIRONMENT=development
LOG_LEVEL=DEBUG
DEBUG=true

# Security
SECRET_KEY=your_secret_key_here_change_in_production
JWT_SECRET_KEY=your_jwt_secret_key_here
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# CORS Configuration
CORS_ORIGINS=http://localhost:3002,http://localhost:3003,http://localhost:3000

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
MAX_FILE_SIZE=50MB
ALLOWED_FILE_TYPES=.txt,.pdf,.md,.docx
UPLOAD_DIRECTORY=./uploads
TEMP_DIRECTORY=./temp

# =============================================================================
# RAG PIPELINE CONFIGURATION
# =============================================================================
# Document Processing
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MIN_CHUNK_SIZE=100
MAX_CHUNKS_PER_DOCUMENT=1000

# Retrieval Configuration
MAX_RETRIEVED_CHUNKS=5
SIMILARITY_THRESHOLD=0.5
RERANK_TOP_K=3

# Generation Configuration
MAX_RESPONSE_LENGTH=2000
TEMPERATURE=0.7
TOP_P=0.9

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================
# Local embedding model (sentence-transformers)
EMBEDDING_MODEL=all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
EMBEDDING_BATCH_SIZE=32

# Alternative: Use OpenAI embeddings
USE_OPENAI_EMBEDDINGS=false

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Database
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# Async Configuration
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT=30

# Caching
CACHE_TTL=3600
ENABLE_QUERY_CACHE=true
ENABLE_EMBEDDING_CACHE=true

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# React App Configuration
#REACT_APP_API_BASE_URL=http://localhost:8002
#REACT_APP_ENVIRONMENT=development
#REACT_APP_APP_NAME=RAG Chatbot
#REACT_APP_VERSION=1.0.0

# WebSocket Configuration (for real-time chat)
WEBSOCKET_URL=ws://localhost:8002/ws
ENABLE_WEBSOCKET=true

# =============================================================================
# AGENT CONTROL (Exercise 7)
# =============================================================================
FAIL_RATE=0.35
INJECT_TIMEOUT_MS=800
CACHE_HIT_RATE=0.7
BUDGET_USD=0.05
MODEL=gpt-4o-mini
MAX_RETRIES=2
CIRCUIT_FAILURES_THRESHOLD=3
CIRCUIT_WINDOW_SECONDS=60
CIRCUIT_COOLDOWN_SECONDS=60
PROMPT_AB_V2_PERCENT=0.10

# =============================================================================
# OBSERVABILITY CONFIGURATION
# =============================================================================
# Jaeger endpoint for trace export (when running locally outside Docker)
JAEGER_ENDPOINT=http://localhost:4317
# Service name for traces
OTEL_SERVICE_NAME=exercise7-backend
# Service version for traces
OTEL_SERVICE_VERSION=1.0.0
# Enable console export for development
OTEL_CONSOLE_EXPORT=true